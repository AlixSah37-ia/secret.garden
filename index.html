<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Secret Garden - Visual Novel</title>
  <style>
    :root{--bg:#0b0b0b;--panel:rgba(0,0,0,0.6);--accent:#d9a8d6}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:var(--bg);color:#fff;display:flex;align-items:center;justify-content:center}
    .game-wrap{width:960px;max-width:98vw;height:600px;background:#111;border-radius:12px;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,0.7);position:relative}
    /* Scenes / backgrounds */
    .scene{position:absolute;inset:0;background-size:cover;background-position:center;opacity:0;transition:opacity 600ms ease;pointer-events:none}
    .scene.visible{opacity:1;pointer-events:auto}
    .overlay{position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0) 40%,rgba(0,0,0,0.65) 100%)}
    /* UI panel */
    .ui{position:absolute;left:20px;right:20px;bottom:20px;background:var(--panel);padding:16px;border-radius:10px;backdrop-filter:blur(4px)}
    .ui .text{min-height:90px}
    .nameplate{font-weight:700;margin-bottom:8px}
    .choices{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.12);padding:10px 14px;border-radius:8px;color:#fff;cursor:pointer}
    .btn.primary{background:var(--accent);color:#111;border:none}
    /* sprites */
    .sprite{position:absolute;bottom:120px;left:50%;transform:translateX(-50%);max-height:60%;transition:opacity 500ms, transform 500ms;opacity:0}
    .sprite.show{opacity:1}
    .sprite.left{left:18%;transform:translateX(-0%)}
    .sprite.right{left:82%;transform:translateX(-100%)}
    /* fade in/out actors */
    .actor{position:absolute;bottom:120px;transition:opacity .5s, transform .5s;opacity:0}
    .actor.show{opacity:1}
    /* menu */
    .menu{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column;background-size:cover;background-position:center}
    .menu .title{font-size:48px;font-weight:800;text-shadow:0 6px 18px rgba(0,0,0,0.6)}
    .menu .credit{margin-top:8px;font-size:12px;opacity:0.9}
    .menu .buttons{margin-top:28px;display:flex;gap:12px}
    .menu .btn{font-size:18px;padding:12px 20px}
    /* apology modal */
    .modal{position:absolute;inset:0;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;padding:18px}
    .card{background:#fff;color:#111;padding:20px;border-radius:12px;max-width:720px}
    .card p{margin:8px 0}
    input[type=text]{padding:10px;border-radius:8px;border:1px solid #ccc;width:100%;box-sizing:border-box}
    /* small helpers */
    .hidden{display:none}
    .center{text-align:center}
    .topbar{position:absolute;top:10px;left:14px;color:#fff;font-size:13px}
  </style>
</head>
<body>
  <div class="game-wrap" id="game">
    <div class="topbar">Secret Garden — Visual Novel</div>

    <!-- Scenes / backgrounds -->
    <div id="scene-menu" class="scene visible" style="background-image:url('https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh1tu8TWD4DIhTMqYxSm8j1J_APhSKWdfLNrVLCrgEHBkZbyGkWlHXz91ZcD-ZSsnp4B7kFuS6eXVilZLQ8iOSZULTUhjQSBNOk3RAxT4AR8BhPsiyWrlMtkUP2mrsACvKW9B5U0lBuFqD3ExOBTaN6bicbihIMjww3jfYti55h6j0WUgcmxFRV5uh0ceVj/w945-h600-p-k-no-nu/unnamed.png')"></div>
    <div id="scene-quarto" class="scene" style="background-image:url('https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCozAci4xH1kKayifpd52AR1CiLHNlFjM7kxm_1I0_qCU0pjKqNraYAEQrnRCO45ox2GsIp2XrAhAow-_x5sSVkzt3_zLxPjgYvCKD16l0gD8ERixPLu1Af-pkcssJqU2rVO0ONPM9HbyE2ccM1oS8fBML-epBmPr6nmrEFK6Xb4X-H4PbgcM7ZRGdB4Q/w320-h320')"></div>
    <div id="scene-jardim" class="scene" style="background-image:url('https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhjAPH_SYsLUW1gAYI-c1ZcHJGjkkZ2i6JLlI0MBzj0pvU0sewf_VHljKJCDvLtd7HVS35D68dkhPveJVR7_Vf6WnkE6l4qqyEt5TCQvpIG5LBBWoMeHic2patFj-sSv0RE5zXvrM1OrsOOfGqhkuEhZ52l-FdfpnPvVik5vXmvCHTVupuhWB2008ESBMY/w320-h320')"></div>
    <div id="scene-jardim-noite" class="scene" style="background-image:url('https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg28zemjDDBufA3rWB9oyCXxkdjHiEcY8DowhCYogtaHBmDYR59TNj07VmgZwqMXf6p0-U0pvKPcqjYu8f3dRJhOJusHHLsyvI1pfIl-bFRjfaNKlbMRDhFeIJjIXB1kXUd1HKh54EqQ7RBLzEe0ZoCniTurGI38Ss0QVsblDcZYsHiPozUJV3tbiEK-uk/w320-h320')"></div>
    <div id="scene-cozinha" class="scene" style="background-image:url('https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiionO9ORMjyhlbfZeuxxLA3Tz-DcE6IVCg73SACPlMBtzbDzmPMhR8SRy04wbj-U_UI6m7wnU6Syczax-I1NxZeiJzubQA-iZFt9DuyAoAKPRS7GB77RkEugMNndqoshDWzWODJqGek_rdV0ebPdCvse23sFuCUEQ5O6ALmPxprRsGhk5Hs30n-A1PMMs3/w945-h600-p-k-no-nu/unnamed.png')"></div>
    <div id="scene-portal" class="scene" style="background-image:url('https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh1tu8TWD4DIhTMqYxSm8j1J_APhSKWdfLNrVLCrgEHBkZbyGkWlHXz91ZcD-ZSsnp4B7kFuS6eXVilZLQ8iOSZULTUhjQSBNOk3RAxT4AR8BhPsiyWrlMtkUP2mrsACvKW9B5U0lBuFqD3ExOBTaN6bicbihIMjww3jfYti55h6j0WUgcmxFRV5uh0ceVj/w945-h600-p-k-no-nu/unnamed.png')"></div>
    <div id="scene-black" class="scene" style="background-image:url('https://img.freepik.com/fotos-premium/moldura-feita-de-flores-brancas-em-fundo-preto-vista-superior-composicao-floral-arranjo-plano_565632-9020.jpg')"></div>

    <!-- sprites: protagonista não ganha sprite porque é player name; estranha sprites -->
    <img id="sprite-estranha-serio" class="sprite left" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEigIAoZEhdD9Lk1Q1YWlCxnitqarkAk_yordN35l5WIbZoN25j-uS3WjTuKkGZoUsi8b9Y3eV27eGB6gZ6mJkcH15S3qzmYiWlFNB1BdUAARI0atxBlxmXPMmjnt53L2FX-I4jNxi6jIqRulk0CGsOEbtrZmnPavgfJb7c5Yvoayi6_akh29GTqceR5Ngg/s320/ChatGPT%20Image%2022%20de%20out.%20de%202025,%2015_12_03.png" alt="Estranha" style="display:none">
    <img id="sprite-estranha-sorrindo" class="sprite left" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhUm7eeNpMP0k5lOXB3uBrQIt1Svgoni_qjuLlTpEGeLEcmxpmVC0KMTY9d3aNn9gAbrMxIE1xo1x1OG7lEs4mCvyNU6U88O5nHO10dbinUWMf8YoSzZv5hqXmwDfCWnwuBe_QZ8hbMOtT6Nuy_LVH7IGj8R8NLVM9tLLH6Z-LjxdH3FdPn9iMg16OhW5M/s320/ChatGPT%20Image%2022%20de%20out.%20de%202025,%2015_12_13.png" alt="Estranha sorrindo" style="display:none">
    <img id="sprite-estranha-brava" class="sprite left" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjiM7jvdVz6oiO7EGah69Ap-F-GSUP5piQa8tuFbGhIg8ZHYMWb89wieqrOlYB4m4YjGsWJLK8S7Ko88C9t25UTWvdVQlJnHvvmgbM3HcFXbTmJ9FTdP-7YMDv1Vtny73aDGSi_1zDeplmuRVMw39bnh9AkxHiA92lM0DV4f0Bd6Lpfs9DhNv7n3NeZghI/s320/ChatGPT%20Image%2022%20de%20out.%20de%202025,%2015_12_17.png" alt="Estranha brava" style="display:none">
    <img id="sprite-estranha-surpresa" class="sprite left" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiee7yned0e1kmQlBfLNS3hgex6DJorhuXGwA_myxYqbaFR3NbwdqVnEogXY2o9p30nVHelJu8sMsDxSG9aO4CZa998lj9XcEEXE_ASuXCV1UbJzwvxCRNkE9gOeC3B521hHhhfCa-_X0bbWYf4oOtYQHsVDSCWBv5lHhPpjHx8G-cTQWz2nq4/s320/ChatGPT%20Image%2022%20de%20out.%20de%202025,%2015_12_24.png" alt="Estranha surpresa" style="display:none">

    <!-- mãe sprites -->
    <img id="sprite-mae-comum" class="sprite right" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjYDnXkKv2wS0FNnpmS0xXVcFEsWZ8MSIqpfGV2AuTyYA9_WP8GQUsyHXEPqFNtpPPic_VLyYdcVkyb95qQLZFlLi5O67_mf46tXUf6RkBWyV5uYb4cwfwcs6a_lyx7ieFLvjSTCRIEEOYAhe-qkSU0Dq6nm3vAHTJ7mbo8vItzEaP0glI3kfgbWzj36To/s320/ChatGPT%20Image%2022%20de%20out.%20de%202025,%2015_36_52.png" alt="Mãe comum" style="display:none">
    <img id="sprite-mae-surpresa" class="sprite right" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhYT97YZ_EuUtlvteUtFpiQOCu5oRO-fcnyrQ7jUCfYKTr85KyOT5eowSvgPIm1Dl9z5Mx0ls_XP2ZLyVFkRcMbP3eHZsEu_xiDcFEkAipYNO8LrB7uvU6rgF-Q6MnCvhb86apmQfAhe3-SyX5okDfBfd5BSKO0BnMsAKW_eJmlX9y6C1i3hm4ErciRt94/s320/ChatGPT%20Image%2022%20de%20out.%20de%202025,%2015_44_11.png" alt="Mãe surpresa" style="display:none">

    <!-- UI panel for VN -->
    <div id="ui" class="ui" style="display:none">
      <div class="nameplate" id="nameplate"></div>
      <div class="text" id="text"></div>
      <div class="choices" id="choices"></div>
    </div>

    <!-- Menu overlay -->
    <div id="menu" class="menu">
      <div class="menu-inner center">
        <div class="title">Secret Garden</div>
        <div class="credit">CRIADO POR: SARAH NOGUEIRA BARRIOS SANTOS</div>
        <div class="buttons">
          <button class="btn" id="btn-start">Play</button>
        </div>
      </div>
    </div>

    <!-- Apology modal (antes do menu de verdade aparece) -->
    <div id="apology" class="modal hidden">
      <div class="card">
        <h3>Aviso</h3>
        <p>Desculpe pelas artes geradas por IA — este é um trabalho de colégio e as imagens foram usadas apenas para ilustração.</p>
        <p class="center"><button class="btn primary" id="apology-ok">Entendi, continuar</button></p>
      </div>
    </div>

    <!-- name prompt modal -->
    <div id="nameModal" class="modal hidden">
      <div class="card">
        <h3>Qual o seu nome? (personagem feminina)</h3>
        <p>O nome que você colocar será usado no lugar de "user" na história.</p>
        <input id="playerName" type="text" placeholder="Digite seu nome aqui" />
        <p style="margin-top:12px;text-align:right"><button class="btn primary" id="name-ok">Confirmar</button></p>
      </div>
    </div>

  </div>

  <script>
    // Basic state machine and script for the visual novel based on the user's text.
    const scenes = {
      menu: document.getElementById('scene-menu'),
      quarto: document.getElementById('scene-quarto'),
      jardim: document.getElementById('scene-jardim'),
      jardimNoite: document.getElementById('scene-jardim-noite'),
      cozinha: document.getElementById('scene-cozinha'),
      portal: document.getElementById('scene-portal'),
      black: document.getElementById('scene-black')
    };
    const ui = document.getElementById('ui');
    const textEl = document.getElementById('text');
    const nameplate = document.getElementById('nameplate');
    const choicesEl = document.getElementById('choices');
    const menu = document.getElementById('menu');
    const apology = document.getElementById('apology');
    const nameModal = document.getElementById('nameModal');
    const spriteMap = {
      estranhaSerio: document.getElementById('sprite-estranha-serio'),
      estranhaSorrindo: document.getElementById('sprite-estranha-sorrindo'),
      estranhaBrava: document.getElementById('sprite-estranha-brava'),
      estranhaSurpresa: document.getElementById('sprite-estranha-surpresa'),
      maeComum: document.getElementById('sprite-mae-comum'),
      maeSurpresa: document.getElementById('sprite-mae-surpresa')
    };

    // helper to show/hide scenes
    function showScene(key){
      Object.values(scenes).forEach(s=>s.classList.remove('visible'));
      if(scenes[key]) scenes[key].classList.add('visible');
    }
    function hideAllSprites(){
      Object.values(spriteMap).forEach(img=>{ img.style.display='none'; img.classList.remove('show'); });
    }
    function showSprite(id, pose=''){
      hideAllSprites();
      const el = spriteMap[id+pose] || spriteMap[id] || document.getElementById(id);
      if(!el) return;
      el.style.display='block';
      // slight delay to allow display to take effect then fade in
      requestAnimationFrame(()=>el.classList.add('show'));
    }

    // game text and branching logic as arrays of steps
    let playerName = 'user';
    const script = [];

    // We'll implement steps as functions that update UI and return a promise resolved when player picks a choice or continues
    function say(speaker, text){
      return new Promise(resolve=>{
        nameplate.textContent = speaker || '';
        textEl.innerHTML = text.replace(/user/g, `<strong>${playerName}</strong>`);
        choicesEl.innerHTML = '<button class="btn" id="continue">Continuar</button>';
        ui.style.display='block';
        document.getElementById('continue').focus();
        document.getElementById('continue').onclick = ()=>{ choicesEl.innerHTML=''; resolve(); };
      });
    }

    function ask(options){
      return new Promise(resolve=>{
        choicesEl.innerHTML = '';
        options.forEach((opt,idx)=>{
          const b = document.createElement('button'); b.className='btn'; b.textContent = opt.label;
          b.onclick = ()=>{ choicesEl.innerHTML = ''; resolve(opt.value); };
          choicesEl.appendChild(b);
        });
      });
    }

    // Implement the full flow matching the provided script
    async function playChapter1(){
      showScene('quarto');
      hideAllSprites();
      await say('', `Depois de muito tempo me acostumando na cidade, finalmente fazendo amigas, finalmente me adaptando à nova casa e ao meu novo quarto, meu pai recebe uma promoção no emprego e precisamos nos mudar, de novo...`);
      await say('', `Não que eu não esteja feliz por ele — ele realmente merece isso —, mas já se tornou chato e cansativo. Sempre que consigo me firmar em um lugar, construir memórias`);

      // First question: name already asked earlier; we handled before starting

      await say(`<strong>${playerName}</strong>`, `Eu, ${playerName}, ajudo a descarregar as coisas da mudança — afinal, temos um caminhão inteiro com roupas e móveis para arrumar dentro da nossa nova casa. Mas ao olhar no jardim, eu vejo uma porta. Ela é diferente e única, cheia de flores, com uma moldura retorcida como se tivesse brotado da própria terra. Ela parece… viva. Mas, quando pisquei, já não estava mais lá. Isso é… estranho, pra dizer o mínimo. Eu logo chego à cozinha e vejo minha mãe arrumando os armários.`);

      // question: O que você faz? "Vou embora e não falo nada." or "Conto a ela o que eu vi."
      let q1 = await ask([
        {label:'Vou embora e não falo nada.', value:'leave'},
        {label:'Conto a ela o que eu vi.', value:'tell'}
      ]);

      if(q1==='leave'){
        await say('', `Eu penso em contar para ela sobre essa porta misteriosa, mas duvido que minha mãe acreditaria em mim. Afinal, quem iria acreditar em uma porta mágica no nosso jardim? É melhor eu não dizer nada mesmo...`);
      } else {
        await showScene('cozinha');
        showSprite('maeComum');
        await say('Mãe', `— ${playerName}, minha filha, de que porta você tá falando? Não tem porta alguma lá no jardim — ela diz, achando estranha minha pergunta.`);
        await say(playerName, `— Tem sim! Eu vi uma porta, só que quando olhei novamente ela tinha sumido...`);
        await say('Mãe', `— Você deve ter visto rápido e achado que tinha alguma porta ou coisa assim, porque eu te garanto que não tem nenhuma porta lá — diz ela, com um tom calmo.`);
        await say('', `Óbvio que ela iria dizer que era coisa da minha cabeça. Era de se esperar...`);
        await say(playerName, `— Então tá bom...`);
        hideAllSprites();
      }

      await say('', `Subo as escadas até meu novo quarto. Ele é espaçoso, mas ainda falta organização, falta alma. Enquanto ajeito minhas coisas, não consigo parar de pensar naquela porta. Um portal que aparece e desaparece...`);
      await say('', `A noite passa silenciosa, como se a nova casa ainda estivesse se ajustando à nossa presença. Quando abro os olhos, o quarto já está iluminado pela claridade suave da manhã.`);
      await showScene('cozinha');
      showSprite('maeComum');
      await say('Mãe', `— Bom dia, ${playerName}. Dormiu bem?`);
      await say(playerName, `— Dormi sim — respondo, sorrindo de volta, então olho em volta e percebo que falta alguém.`);
      await say('', `— Cadê o pai? Ele não vai tomar café com a gente?`);
      await say('Mãe', `— Seu pai já saiu. Tinha uma reunião cedo. Queria começar o primeiro dia bem...`);
      await say(playerName, `— Claro, trabalho primeiro, família depois... como sempre.`);

      await say('', `Pouco tempo depois, coloco a mochila nas costas e sigo para a escola. (Depois de um tempo...) Volto para casa pelo mesmo caminho, observando as casas vizinhas e os jardins cuidadosamente enfeitados. Ao abrir o portão de casa, meus olhos são atraídos outra vez pelo fundo do quintal. E lá está ela. A porta misteriosa. A mesma moldura viva, estranha, que parecia ter desaparecido ontem. Só que, desta vez... parece ainda mais nítida, como se estivesse esperando por mim.`);

      // question: O que você faz? "Se nega" or "Decide se aproximar e abrir a porta."
      showScene('jardim');
      let q2 = await ask([
        {label: 'Se nega que essa porta realmente é real e acha que está vendo coisas.', value:'deny'},
        {label: 'Decide se aproximar e abrir a porta.', value:'open'}
      ]);

      if(q2==='deny'){
        await say('', `Eu respiro fundo, fecho os olhos e balanço a cabeça. "— Não... não pode ser. É só a mudança mexendo comigo. Cansaço, estresse... qualquer coisa, menos uma porta mágica no quintal." Dou as costas, tentando ignorar o frio que percorre meu corpo. Mas, no fundo, algo dentro de mim sabe que estou mentindo pra mim mesma.`);
        await say('', `Nos dias seguintes, continuo vivendo minha rotina — colégio, estudos, minha mãe sempre preocupada, e meu pai... ausente, como sempre. Mas toda vez que passo pelo jardim, lá está ela. A porta coberta de flores. E cada vez parece mais... real.`);
        await say('', `Até que, um dia, acordo de madrugada com a sensação sufocante de que algo está me observando pela janela. Corro para fechá-la, mas, antes disso, vejo lá fora, no escuro do jardim, o contorno nítido do portal brilhando, como se me chamasse. Eu travo. Não ouso abrir e nunca abro.`);
        await say('', `O tempo passa. A vida segue. Mas eu continuo vendo aquela porta. Sempre. Aos poucos, começo a me sentir presa não dentro dela, mas fora dela. Como se tivesse escolhido a pior das prisões: a dúvida eterna.`);
        // Final da Negação ending
        showScene('black');
        await say('', `⭐ FINAL CONQUISTADO:\nFinal da Negação: Você nunca entrou no portal. A cada dia que você vê essa porta, parece enlouquecer um pouco mais.`);
        await say('', `🕯️ Faixa preta na tela com letras brancas:\n“Parabéns. Em vez de viver um destino estranho… você só perdeu a cabeça. Faça terapia, mana.”`);
        // end
        return;
      }

      // open the portal branch
      showScene('portal');
      await say('', `Ao atravessar o portal, sinto imediatamente que não deveria estar aqui. O ar é denso, quase viscoso, como se cada respiração fosse puxada de mim à força. O cheiro não é de grama ou terra molhada... mas de flores desconhecidas, com um perfume doce demais, sufocante, quase venenoso.`);
      await showScene('jardim-noite');
      await say('', `O jardim é vasto, iluminado apenas por uma lua que não parece a mesma do mundo real. As árvores se erguem como colunas escuras, e entre seus galhos vejo pequenas luzes flutuando, como vaga-lumes que me observam em silêncio. O vento sopra, mas não há som. Nem de folhas, nem de insetos. Só um silêncio vivo, que pressiona meus ouvidos.`);
      await say('', `E então... eu a vejo. No centro da clareira, uma estranha se destaca, como se o espaço inteiro tivesse se moldado apenas para emoldurá-la. Seu corpo é delicado, mas sua presença é sufocante. A pele clara contrasta com detalhes metálicos — piercings que brilham com o reflexo frio da lua. Seus cabelos, de um rosa pálido e quase apagado, caem em tranças presas por ornamentos incomuns, como se fossem feitos de restos de ferro antigo.`);
      // show sprite estranha
      showSprite('estranhaSerio');

      await say('', `As roupas escuras envolvem seu corpo com camadas pesadas, adornadas por pérolas pálidas e um crucifixo torto, que balança levemente com a brisa inexistente. O que mais me prende são os olhos dela. Eles não são apenas bonitos: são fundos, carregados de algo que não consigo nomear. Não sei se é tristeza, raiva, saudade... ou tudo ao mesmo tempo.`);
      await say('', `O olhar dela é tão intenso que sinto que, se continuar fitando-o, posso acabar me perdendo. Ela não se move. Só me observa, imóvel, como se já soubesse que eu viria. Meu corpo estremece. Dou um passo para trás... mas algo dentro de mim quer ir até ela.`);

      // question: caminhar até a estranha or permanecer parada
      let q3 = await ask([
        {label:'Caminhar até a estranha.', value:'approach'},
        {label:'Permanecer parada, observando-a de longe.', value:'wait'}
      ]);

      if(q3==='approach'){
        // approach
        showSprite('estranhaSorrindo');
        await say('', `Meus pés avançam quase sem pensar. Cada passo faz o chão ranger como se estivesse vivo. Quando finalmente me aproximo, ela curva levemente a cabeça para o lado e abre um sorriso pequeno, discreto... mas frio demais para ser apenas gentileza.`);
        await say('?', `Com uma voz suave, quase um sussurro, ela fala: — Então você finalmente chegou... eu estava esperando.`);
      } else {
        // wait -> she walks to you
        showSprite('estranhaSerio');
        await say('', `Congelo. Minhas pernas não obedecem, e fico apenas encarando-a de longe. Mas os olhos dela já estavam fixos em mim desde o início — como se não houvesse lugar para se esconder. Então, sem pressa, aquela moça estranha começa a andar em minha direção. Seus pés não fazem barulho algum, é como se flutuasse sobre as flores.`);
        showSprite('estranhaSorrindo');
        await say('', `Quando para diante de mim, tão próxima que sinto seu perfume doce e sufocante, ela sorri da mesma forma enigmática. — Então você finalmente chegou... eu estava esperando.`);
      }

      // end of chapter
      showScene('black');
      await say('', `🌙 FIM DO CAPÍTULO`);
    }

    // start flow: show apology first, then menu; when clicking play show name modal then start
    document.getElementById('btn-start').addEventListener('click', ()=>{
      // show apology then on continue show name prompt
      apology.classList.remove('hidden');
      menu.style.display='none';
    });
    document.getElementById('apology-ok').addEventListener('click', ()=>{
      apology.classList.add('hidden');
      nameModal.classList.remove('hidden');
    });
    document.getElementById('name-ok').addEventListener('click', ()=>{
      const v = document.getElementById('playerName').value.trim();
      if(v) playerName = v;
      nameModal.classList.add('hidden');
      // hide menu and start game
      document.getElementById('menu').style.display='none';
      // begin chapter 1
      playChapter1().catch(err=>{ console.error(err); alert('Erro no jogo: '+err.message) });
    });

    // Accessibility: press Enter to continue when choices have only Continue
    document.addEventListener('keydown', (e)=>{
      if(e.key==='Enter'){
        const c = document.querySelector('#choices .btn');
        if(c) c.click();
      }
    });

  </script>
</body>
</html>
